<!--index.wxml-->
<view class='view'>
<!-- 跑步首页 -->
  <map wx-if="{{showMain}}" longitude="{{longitude}}" latitude="{{latitude}}" markers="{{markers}}" polyline="{{polyLine}}" show-location="true" covers="{{covers}}" show-location>
    <view wx-if="{{showRes?false:true}}">
      <view class="ranking">
        <button bindtap="toggleRight1">
          <image src="../../imgs/run/ranking.png"></image>
        </button>
        <i-drawer i-class="ranking-body" mode="right" visible="{{showRight1}}" bind:close="toggleRight1">
          <view class="ranking-con">
            <view class="title">跑步排行榜</view>
            <view>
              <i-tabs current="{{ current }}" bindchange="handleChange">
                <i-tab key="week" title="周榜"></i-tab>
                <i-tab key="month" title="月榜"></i-tab>
              </i-tabs>
            </view>

            <view>
              <i-cell-group i-class="cell-group">
                <i-cell i-class="cell" wx:for="{{rankArr}}" wx:key="id" is-link url="../../pages/user/user">
                  <view class="num lf">
                    <image src="{{item.rankPho}}"></image>
                  </view>
                  <view class="cell-info lf">
                    <view class="photo">
                      <image src="{{item.pho}}"></image>
                    </view>
                    <view class="text">
                      <text class="name">{{item.name}}</text>
                      <view>
                        <text class="detail">{{item.route}}/</text>
                        <text class="detail">{{item.time}}/</text>
                        <text class="detail">{{item.avrSpeed}}</text>
                      </view>
                    </view>
                  </view>
                </i-cell>

              </i-cell-group>
              <i-cell i-class="cell my-cell" is-link url="../../pages/user/user">
                <view class="num lf">
                  <image src="../../imgs/run/one.png"></image>
                </view>
                <view class="cell-info lf">
                  <view class="photo">
                    <image src="../../imgs/run/photo.png"></image>
                  </view>
                  <view class="text">
                    <text class="name">lym</text>
                    <view>
                      <text class="detail">跑步总程/</text>
                      <text class="detail">跑步总时长/</text>
                      <text class="detail">平均速度</text>
                    </view>
                  </view>
                </view>
              </i-cell>
            </view>
          </view>
        </i-drawer>
      </view>
      <view class="start-btn">
        <button bindtap="startRun">开始</button>
        <view class="swiper-text">
          <swiper circular="true" indicator-dots="{{indicatorDots}}" autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}">
            <block wx:for="{{text}}" wx:key="index">
              <swiper-item>
                <view>{{item}}</view>
              </swiper-item>
            </block>
          </swiper>
        </view>
      </view>
    </view>
    <!-- 跑步结束板块 -->
    <view wx-if="{{showRes}}">
      <view class="go-back" bindtap="goBack">
        <i-icon type="return" size="28" color="#80848f" />返回
      </view>
      <view class="runRes">
        <view>
          <text class="num">0.00</text>
          <text>公里</text>
        </view>
        <view class="share rt" bindtap="shareRes">
          <i-icon type="share" size="28" color="#fff" />
        </view>
        <view class="detail">
          <view class="time">
            <text>00:00:00</text>
            <text>时长</text>
          </view>
          <view class="vraSpd">
            <text>--</text>
            <text>平均配速</text>
          </view>
          <view class="heat">
            <text>100</text>
            <text>热量(千卡)</text>
          </view>
        </view>
      </view>


    </view>
  </map>
  <!-- 跑步开始板块 -->
  <view wx-if="{{showMain?false:true}}" class="running">
    <view class="route">
      <text class="num">0.01</text>
      <text>公里</text>
    </view>
    <view class="tmsp">
      <view class="time lf">
        <text>{{hours}}:{{minutes}}:{{secondes}}</text>
        <text>时长</text>
      </view>
      <text class="text">|</text>
      <view class="avrSpeed rt">
        <text>{{speed}}km/h</text>
        <text>配速</text>
      </view>
    </view>
    <view class="run-btn">
      <button class="lf-btn" bindtap="pauseRun">{{pause}}</button>
      <button class="rt-btn" bindtap="endRun">结束</button>
    </view>
  </view>
</view>
<view style='width:0px;height:0px;overflow:hidden;'>
    <canvas canvas-id="springCanvas" style="width:328px;height:582px"></canvas>   
</view> 
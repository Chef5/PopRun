<!-- index.wxml -->
<van-dialog id="van-dialog" />
<van-toast id="custom-selector" />
<view class='view'>
  <!-- 跑步首页 -->
  <map wx-if="{{showMain}}" longitude="{{longitude}}" latitude="{{latitude}}" markers="{{markers}}" polyline="{{polyLine}}" show-location="true" show-location>
    <view wx-if="{{showRes?false:true}}">
      <!-- 排行榜 -->
      <cover-view class="ranking">
        <button bindtap="toggleRight1">
          <cover-image src="../../imgs/run/ranking.png"></cover-image>
        </button>
        <i-drawer i-class="ranking-body" mode="right" visible="{{showRight1}}" bind:close="toggleRight1">
        <view class="ranking-con">
          <view class="title">跑步排行榜</view>
          <view>
            <van-tabs active="{{active}}" color="#409eff" border="none" bind:change="onRankChange">
              <van-tab title="周榜" name="week">
                <!-- 跑步列表 -->
                <view class="rank-list">
                    <i-cell-group i-class="cell-group">
                      <i-cell i-class="cell" wx:for="{{rankArr}}" wx:key="id" is-link link-type="switchTab" url="../user/user?">
                        <view class="num lf">
                          <image src="../../imgs/run/one.png"></image>
                        </view>
                        <view class="cell-info lf">
                          <view class="photo">
                            <image src="{{item.img}}"></image>
                          </view>
                          <view class="text">
                            <text class="name">{{item.nickname}}</text>
                            <view>
                              <text class="detail">{{item.sumD}}公里/</text>
                              <text class="detail">{{item.sumT}}分钟/</text>
                              <text class="detail">{{item.avgS}}/km</text>
                            </view>
                          </view>
                        </view>
                      </i-cell>
                    </i-cell-group>
                    <i-cell i-class="cell my-cell" link-type="switchTab" is-link url="../user/user">
                      <view class="num lf">
                        <image src="../../imgs/run/one.png"></image>
                      </view>
                      <view class="cell-info lf">
                        <view class="photo">
                          <image src="{{myRank.img}}"></image>
                        </view>
                        <view class="text">
                          <text class="name">{{myRank.nickname}}</text>
                          <view>
                            <text class="detail">{{myRank.sumD}}公里/</text>
                            <text class="detail">{{myRank.sumT}}分钟/</text>
                            <text class="detail">{{myRank.avgS}}/km</text>
                          </view>
                        </view>
                      </view>
                    </i-cell>
                </view>
              </van-tab>
              <van-tab title="月榜" name="month">内容 2</van-tab>
            </van-tabs>
          </view>
        </view>
        </i-drawer>
      </cover-view>
      <view class="start-btn">
        <button bindtap="countDown">开始</button>
        <view class="swiper-text">
          <!-- 属性:衔接滑动、自动切换、滑动间隔、滑动时长 -->
          <swiper circular="true" autoplay="true" interval="5000" duration="500">
            <block wx:for="{{text}}" wx:key="index">
              <swiper-item>
                <view>{{item.hitokoto}}</view>
              </swiper-item>
            </block>
          </swiper>
        </view>
      </view>
    </view>
    <!-- 跑步结果 -->
    <view wx-if="{{showRes}}">
      <view class="go-back" bindtap="goBack">
        <i-icon type="return" size="28" color="#80848f" /> 返回
      </view>
      <view class="runRes">
        <view>
          <text class="num">{{distance}}</text>
          <text>公里</text>
        </view>
        <view class="share rt" bindtap="shareRes">
          <i-icon type="share" size="28" color="#fff" />
        </view>
        <view class="detail">
          <view class="time">
            <text>{{hours}}:{{minutes}}:{{secondes}}</text>
            <text>时长</text>
          </view>
          <view class="vraSpd">
            <text>{{avrSpeed}}</text>
            <text>平均配速</text>
          </view>
          <view class="heat">
            <text>{{heat}}</text>
            <text>热量(千卡)</text>
          </view>
        </view>
      </view>
    </view>
  </map>
  <!-- 正在跑步 -->
  <view wx-if="{{showMain?false:true}}" class="running">
    <view class="route">
      <text class="num">{{distance}}</text>
      <text>公里</text>
    </view>
    <view class="tmsp">
      <view class="time lf">
        <text>{{hours}}:{{minutes}}:{{secondes}}</text>
        <text>时长</text>
      </view>
      <text class="text">|</text>
      <view class="avrSpeed rt">
        <text>{{speed}}</text>
        <text>配速</text>
      </view>
    </view>
    <view class="run-btn">
      <button class="lf-btn" bindtap="pauseRun">{{pause}}</button>
      <button class="rt-btn" bindtap="endRun">结束</button>
    </view>
  </view>
</view>